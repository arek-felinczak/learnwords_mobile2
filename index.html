<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Learn words</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta name="description" content="">
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <!-- Place favicon.ico in the root directory -->
    </head>
    <body>
        <div class="navbar navbar-inverse">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#categories"> Home </a>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li id='categories'><a id="DictionaryItemNav" href="#categories"> Dictionary </a></li>
                        <li id='favourites'><a href="#favourites">Favourites</a></li>
                        <li class="divider"></li>
                        <li class="dropdown">
                            <a href="#options" class="dropdown-toggle" data-toggle="dropdown"> Options <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#" onClick="app_router.refreshCache(true); app_router.navigate('#categories', true); return false;">Refresh dictionary</a></li>
                                <li class="dropdown-header">Word details in:</li>
                                <li><a href="#" onClick="window.localStorage['dictionaryLink']=window.learnwordsConfig.diki;">diki.pl</a></li>
                                <li><a href="#" onClick="window.localStorage['dictionaryLink']=window.learnwordsConfig.forvo;">forvo.pl</a></li>
                                <li><a href="#" onClick="window.localStorage['dictionaryLink']=window.learnwordsConfig.getionary;">m.getionary.pl</a></li>
                            </ul>
                        </li>
                        <li id='about'><a href="#about">About</a></li>
                        <li id='contact'><a href="#contact">Contact</a></li>
                        <li id='itemAddForm'><a href="#itemAddForm">Add word</a></li>
                    </ul>
                    <div class="navbar-form navbar-right">
                        <div class="form-group">
                            <input type="text" placeholder="search" id='searchWord' style="width:200px; display: inline-block" class="form-control" />
                            <a href="#search" id="search-link" class="btn btn-success"> search </a>
                        </div>                        
                    </div>
                </div><!--/.navbar-collapse -->
            </div>
        </div>
        <div class="container">            
            <div id="alert_placeholder"></div>
            <div id="app" class="row">
                <div id="Breadcrumb"></div>
                <div id="content" style='margin: 4px'></div>
                <br /><br />
            </div>
            <div class="navbar navbar-fixed-bottom text-center" style="background-color: #E8E8E8;">
                <span> &copy; Designed by Arek Feli≈Ñczak &middot; </span> 
                <span> <a target='github' href="https://github.com/arek-felinczak/learnwords_mobile2"> Source code </a> </span><br /> 
                <span> <a target='forvo' href="http://www.forvo.com/"> Pronunciations by Forvo </a> </span> | 
                <span> <a target='diki' href="http://diki.pl/"> Diki.pl </a> </span> | 
                <span> <a target='getionary' href="http://getionary.pl/"> Getionary.pl </a> </span>
            </div>
        </div> <!-- /container -->
        <span id="forvo_ext_player" style="position:absolute;left:-99999px;top:-99999px;"></span>
        <script type="text/javascript" src="js/lib/jquery-1.10.2.min.js"></script> 
        <script type="text/javascript">
            $('#reklamacba').remove();
            
            $.support.cors = true;
            $.ajaxSettings.xhr = function() {return new window.XMLHttpRequest({mozSystem: true});};
           
            window.learnwordsConfig = {
                restUrl: window.location.protocol + '//' + window.location.host,
                diki: "http://www.diki.pl/slownik-angielskiego/?q={0}",
                forvo: "http://pl.forvo.com/word/{0}/#en",
                getionary: 'http://m.getionary.pl/search.html?query={0}',
                transitions: true
            };
            if (window.location.host.indexOf('localhost') === 0 || window.location.protocol.indexOf('http:') === -1)
                window.learnwordsConfig['restUrl'] = "http://vocabulary.cba.pl";
            
            window.debug_mode = true;
            if (!window.console) window.console = {};
            if (!window.localStorage['dictionaryLink'])
                window.localStorage['dictionaryLink'] = window.learnwordsConfig.diki;
        </script>
        <script type="text/javascript" src="js/lib/underscore-min.js"></script> 
        <script type="text/javascript" src="js/lib/backbone-min.js"></script>
        <script type="text/javascript" src="js/lib/handlebars.min.js"></script>
        <script type="text/javascript">
            Handlebars.registerHelper('setIndex', function(value){
                return Number(value + 1);
            });
        </script>
        <script type="text/javascript" src="js/lib/commons.js"></script>
        <script type="text/javascript" src="js/lib/storage.js"></script>
        <script type="text/javascript" src="js/Model/category.js"></script> 
        <script type="text/javascript" src="js/Model/items.js"></script> 
        <script type="text/javascript" src="js/View/CategoryItemsView.js"></script>     
        <script type="text/javascript" src="js/View/ItemsView.js"></script>
        <script type="text/javascript" src="js/View/ItemView.js"></script>
        <script type="text/javascript" src="js/View/ItemFormView.js"></script>
        <script type="text/javascript" src="js/View/AboutView.js"></script>
        <script type="text/javascript" src="js/View/ContactView.js"></script>
        <script type="text/javascript" src="js/Model/vocabularyManager.js"></script>
        <script type="text/javascript" src="js/View/Breadcrumb.js"></script>
        <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/router.js"></script>
        <!-- for adobe cloud build -->
        <script src="phonegap.js"></script>
        <script type="text/javascript" src="js/lib/fastclick.min.js"></script>
        <script type="text/javascript">
            function rollUpNav(obj){
                if ($(".navbar-collapse").hasClass("in") && $(obj).attr('data-toggle') !== "dropdown" ) {
                    $(".navbar-toggle").click();
                }
            }
            // toggle collapsed menu after click
            $('.navbar-collapse a').on('click', function() {
                rollUpNav(this);
            });
            $('input#searchWord').keyup(function(e) {
                if(e.which === 13) { 
                    rollUpNav(this);
                    app_router.navigate('#search', true);
                };
            });
                        
            window.learnwordsConfig.isTouchDevice = "ontouchstart" in window;            
            if (window.learnwordsConfig.isTouchDevice === true) {                
                $(function() {
                    FastClick.attach(document.body);
                });
                       
                // for phonegap only
                function showExitConfirm(e) {
                    navigator.notification.confirm(
                        'Do you want to exit?', // message
                        function(e) {if (e === 2) { navigator.app.exitApp(); }},
                        'Exit', // title
                        'Cancel,OK' // buttonLabels
                    );
                    return false;
                };
                
                function showRefreshButton(e) {
                    navigator.notification.confirm(
                        'Do you want to refresh data?', // message
                        function(e) {if (e === 2) { app_router.refreshCache(true); }},
                        'Exit', // title
                        'Cancel,OK' // buttonLabels
                    );
                    return false;
                };
               
                document.addEventListener("deviceready", function(){
                    document.addEventListener("backbutton", showExitConfirm, false);
                    document.addEventListener("menubutton", showRefreshButton, false);
                }, false);                
            }
        </script>        
    </body>
</html>
